<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>PLE7 TAB STUDIO</title>
    <script src="https://cdn.jsdelivr.net/npm/@coderline/alphatab@1.3.0/dist/alphaTab.js"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <style>
        :root { --accent: #58a6ff; --bg: #0d1117; --panel: #161b22; }
        body { margin: 0; font-family: 'Segoe UI', sans-serif; background: var(--bg); color: #fff; padding: 20px; display: flex; flex-direction: column; align-items: center; }
        #studio-card { width: 100%; max-width: 900px; background: var(--panel); padding: 20px; border-radius: 15px; border: 1px solid #30363d; }
        textarea { width: 100%; height: 180px; background: #000; color: #00ff00; border: 1px solid #333; border-radius: 8px; padding: 12px; font-family: 'Courier New', monospace; font-size: 15px; margin-bottom: 15px; box-sizing: border-box; }
        .controls { display: flex; gap: 10px; margin-bottom: 15px; flex-wrap: wrap; }
        .btn { padding: 10px 18px; border-radius: 6px; border: none; cursor: pointer; font-weight: bold; background: #21262d; color: #c9d1d9; border: 1px solid #f0f6f033; transition: 0.2s; }
        .btn:hover { background: #30363d; }
        .btn-play { background: #238636; color: white; }
        .btn-play:hover { background: #2ea043; }
        #alphaTab { background: white; border-radius: 8px; min-height: 150px; }
        .status-bar { padding: 8px; font-size: 12px; color: #8b949e; background: #000; border-radius: 5px; margin-bottom: 10px; display: flex; justify-content: space-between; }
    </style>
</head>
<body>

<div id="studio-card">
    <h2 style="margin: 0 0 15px 0; color: var(--accent);">üé∏ TAB EDITOR PRO</h2>
    
    <div class="status-bar">
        <div id="status">–ó–∞–≥—Ä—É–∑–∫–∞ –º–æ–¥—É–ª–µ–π...</div>
        <div id="load-progress">0%</div>
    </div>

    <textarea id="tab-input">
.
content
:track 1
:tuning e5 b4 g4 d4 a3 e3
.
4.1 5.1 7.1 0.1 | 4.1 5.1 7.1 0.1 | 8.2 7.2 5.2 0.2
    </textarea>
    
    <div class="controls">
        <button class="btn btn-play" onclick="playTab()"><i class="fas fa-play"></i> –ò–ì–†–ê–¢–¨</button>
        <button class="btn" onclick="stopTab()"><i class="fas fa-stop"></i> –°–¢–û–ü</button>
        <button class="btn" onclick="renderTab()"><i class="fas fa-sync"></i> –û–ë–ù–û–í–ò–¢–¨ –ù–û–¢–´</button>
    </div>

    <div id="alphaTab"></div>
</div>

<script>
    const element = document.querySelector('#alphaTab');
    
    // –ù–∞—Å—Ç—Ä–æ–π–∫–∏ —Å —Ñ–∏–∫—Å–æ–º –¥–ª—è –±—Ä–∞—É–∑–µ—Ä–æ–≤
    const api = new alphaTab.AlphaTabApi(element, {
        core: {
            useWorkers: false // –û—Ç–∫–ª—é—á–∞–µ–º –≤–æ—Ä–∫–µ—Ä—ã –¥–ª—è —Å—Ç–∞–±–∏–ª—å–Ω–æ—Å—Ç–∏ –Ω–∞ GitHub Pages
        },
        player: {
            enablePlayer: true,
            soundFont: "https://cdn.jsdelivr.net/npm/@coderline/alphatab@1.3.0/dist/soundfont/sonivox.sf2"
        }
    });

    // –û—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏–µ –∑–∞–≥—Ä—É–∑–∫–∏ –∑–≤—É–∫–æ–≤
    api.soundFontLoad.on((e) => {
        const percent = Math.round(e.loaded / e.total * 100);
        document.getElementById('load-progress').innerText = percent + "%";
        document.getElementById('status').innerText = "–ó–∞–≥—Ä—É–∑–∫–∞ –∑–≤—É–∫–æ–≤...";
    });

    api.soundFontLoaded.on(() => {
        document.getElementById('status').innerText = "–ì–æ—Ç–æ–≤ –∫ —Ä–æ–∫—É! –ù–∞–∂–º–∏ –ò–≥—Ä–∞—Ç—å.";
        document.getElementById('load-progress').innerText = "100%";
    });

    function renderTab() {
        const tex = document.getElementById('tab-input').value;
        api.tex(tex);
    }

    function playTab() {
        // –ü—Ä–æ–≤–µ—Ä–∫–∞ –∞—É–¥–∏–æ-–∫–æ–Ω—Ç–µ–∫—Å—Ç–∞
        try {
            api.play();
        } catch (e) {
            console.log("–ù—É–∂–µ–Ω –∫–ª–∏–∫ –¥–ª—è –∞–∫—Ç–∏–≤–∞—Ü–∏–∏ –∑–≤—É–∫–∞");
            api.play(); 
        }
    }

    function stopTab() {
        api.stop();
    }

    // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ
    window.onload = () => {
        setTimeout(renderTab, 1000);
    };
</script>

</body>
</html>
