<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    
    <title>ROCK CLOUD | –ê—Ä—Ö–∏–≤ The Lemmons, Tidal Wave –∏ –¥—Ä.</title>
    <meta name="description" content="–≠–∫—Å–∫–ª—é–∑–∏–≤–Ω—ã–π –∞—Ä—Ö–∏–≤ —Ä–æ–∫-–º—É–∑—ã–∫–∏: The Lemmons, Tidal Wave. –ò—Å—Ç–æ—Ä–∏—è, —Ä–µ–¥–∫–∏–µ —Ç—Ä–µ–∫–∏ –∏ Thrash Metal 90-—Ö. Must have –¥–ª—è —Ñ–∞–Ω–∞—Ç–æ–≤ Annihilator.">
    <meta name="keywords" content="The Lemmons, Tidal Wave, –•–µ—Ä—Å–æ–Ω —Ä–æ–∫, Thrash Metal Ukraine, —É–∫—Ä–∞–∏–Ω—Å–∫–∏–π —Ä–æ–∫ –∞—Ä—Ö–∏–≤, —Ä–æ–∫ –º—É–∑—ã–∫–∞ 90-—Ö, Poison Of Sorrow">
    
    <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-database.js"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    
    <style>
        :root {
            --glass: rgba(255, 255, 255, 0.25);
            --border: rgba(255, 255, 255, 0.4);
            --accent: #0071bc;
        }

        body {
            margin: 0;
            font-family: 'Segoe UI', sans-serif;
            background: linear-gradient(135deg, #74ebd5 0%, #9face6 100%);
            min-height: 100vh;
            display: flex;
            justify-content: center;
            align-items: center;
            color: #1d1d1f;
        }

        #app-container {
            width: 95%;
            max-width: 900px;
            height: 90vh;
            background: rgba(255, 255, 255, 0.3);
            backdrop-filter: blur(20px);
            border-radius: 30px;
            border: 1px solid var(--border);
            box-shadow: 0 20px 50px rgba(0,0,0,0.1);
            display: flex;
            flex-direction: column;
            overflow: hidden;
        }

        header {
            padding: 20px 30px;
            background: rgba(255, 255, 255, 0.2);
            display: flex;
            justify-content: space-between;
            align-items: center;
            border-bottom: 1px solid var(--border);
        }

        .screen { display: none; flex: 1; overflow-y: auto; padding: 25px; }
        .active { display: block; }

        /* –≠–ª–µ–º–µ–Ω—Ç—ã —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è */
        .btn {
            padding: 12px 24px;
            border-radius: 15px;
            border: none;
            cursor: pointer;
            font-weight: 600;
            transition: 0.3s;
            display: inline-flex;
            align-items: center;
            gap: 8px;
            box-shadow: 0 4px 12px rgba(0,0,0,0.1);
        }
        .btn-main { background: white; color: #333; }
        .btn-add { background: linear-gradient(135deg, #0071bc, #29abe2); color: white; }
        .btn-save { background: #2ecc71; color: white; width: 100%; margin-top: 15px; }

        /* –ö–∞—Ä—Ç–æ—á–∫–∏ –≥—Ä—É–ø–ø */
        .band-card {
            background: rgba(255, 255, 255, 0.6);
            border-radius: 20px;
            padding: 15px;
            margin-bottom: 15px;
            display: flex;
            align-items: center;
            gap: 20px;
            cursor: pointer;
            border: 1px solid rgba(255,255,255,0.5);
            transition: 0.3s;
        }
        .band-card:hover { transform: scale(1.02); background: white; }
        .band-thumb { width: 60px; height: 60px; border-radius: 50%; object-fit: cover; border: 2px solid white; }

        /* –î–µ—Ç–∞–ª–∏ */
        .detail-img { width: 100%; max-width: 300px; border-radius: 20px; box-shadow: 0 10px 30px rgba(0,0,0,0.1); }
        audio { width: 100%; margin: 15px 0; border-radius: 30px; }

        /* –°–µ–∫—Ü–∏—è –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–µ–≤ */
        .comments-section { margin-top: 30px; background: rgba(255,255,255,0.2); padding: 20px; border-radius: 20px; }
        .comment-item { background: white; padding: 10px 15px; border-radius: 12px; margin-bottom: 10px; font-size: 0.9em; box-shadow: 0 2px 5px rgba(0,0,0,0.05); }
        .comment-item b { color: var(--accent); }
        
        input, textarea {
            width: 100%; padding: 12px; margin: 8px 0; border-radius: 10px; border: 1px solid rgba(0,0,0,0.1);
            background: rgba(255,255,255,0.8); box-sizing: border-box;
        }
    </style>
</head>
<body>

<div id="app-container">
    <header>
        <h2 style="margin:0; color: #004e92;">ROCK CLOUD</h2>
        <button class="btn btn-add" onclick="openAdminEditor()"><i class="fas fa-plus"></i> –î–æ–±–∞–≤–∏—Ç—å</button>
    </header>

    <div id="screen-list" class="screen active">
        <div id="bands-container">–°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è —Å –æ–±–ª–∞–∫–æ–º...</div>
    </div>

    <div id="screen-edit" class="screen">
        <button class="btn btn-main" onclick="showScreen('screen-list')">‚Üê –ù–∞–∑–∞–¥</button>
        <h3>–î–æ–±–∞–≤–∏—Ç—å –≥—Ä—É–ø–ø—É –≤ –∞—Ä—Ö–∏–≤</h3>
        <input type="text" id="e-name" placeholder="–ù–∞–∑–≤–∞–Ω–∏–µ (–Ω–∞–ø—Ä–∏–º–µ—Ä: The Lemmons)">
        <input type="text" id="e-year" placeholder="–ñ–∞–Ω—Ä –∏ –ì–æ–¥">
        <textarea id="e-history" rows="4" placeholder="–ò—Å—Ç–æ—Ä–∏—è –≥—Ä—É–ø–ø—ã..."></textarea>
        <label class="btn btn-main">üñºÔ∏è –§–æ—Ç–æ<input type="file" hidden onchange="encodeMedia(this, 'img')"></label>
        <label class="btn btn-main">üéµ –ê—É–¥–∏–æ (MP3 —Å—Å—ã–ª–∫–∞)<input type="text" id="e-audio-link" placeholder="–ü—Ä—è–º–∞—è —Å—Å—ã–ª–∫–∞ –Ω–∞ mp3"></label>
        <button class="btn btn-save" onclick="saveData()">–°–û–•–†–ê–ù–ò–¢–¨</button>
    </div>

    <div id="screen-view" class="screen">
        <button class="btn btn-main" onclick="showScreen('screen-list')">‚Üê –ö —Å–ø–∏—Å–∫—É</button>
        <div id="view-content" style="margin-top:20px;"></div>
        
        <div class="comments-section">
            <h4>–ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏</h4>
            <div id="comments-container"></div>
            <div style="display:flex; gap:10px; margin-top:10px;">
                <input type="text" id="c-name" placeholder="–í–∞—à–µ –∏–º—è" style="width:120px;">
                <input type="text" id="c-text" placeholder="–ù–∞–ø–∏—à–∏—Ç–µ —á—Ç–æ-–Ω–∏–±—É–¥—å...">
                <button class="btn btn-add" onclick="addComment()">–û—Ç–ø—Ä–∞–≤–∏—Ç—å</button>
            </div>
        </div>
    </div>
</div>

<script>
    // –ö–û–ù–§–ò–ì Firebase
    const firebaseConfig = { databaseURL: "https://ple7-frts-try-default-rtdb.europe-west1.firebasedatabase.app/" };
    firebase.initializeApp(firebaseConfig);
    const db = firebase.database();
    const ADMIN_PASS = "immaimdhiesyf";

    let tempMedia = {};
    let currentBandId = null;

    // –ó–∞–≥—Ä—É–∑–∫–∞ —Å–ø–∏—Å–∫–∞
    db.ref('bands').on('value', (snap) => {
        const container = document.getElementById('bands-container');
        container.innerHTML = "";
        const data = snap.val();
        for (let id in data) {
            const b = data[id];
            container.innerHTML += `
                <div class="band-card" onclick="viewBand('${id}')">
                    <img src="${b.img || 'https://via.placeholder.com/60'}" class="band-thumb">
                    <div>
                        <strong>${b.name}</strong><br>
                        <small>${b.year || ''}</small>
                    </div>
                </div>
            `;
        }
    });

    function showScreen(id) {
        document.querySelectorAll('.screen').forEach(s => s.classList.remove('active'));
        document.getElementById(id).classList.add('active');
    }

    function openAdminEditor() {
        if (prompt("–ü–∞—Ä–æ–ª—å –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞:") === ADMIN_PASS) {
            tempMedia = {};
            showScreen('screen-edit');
        }
    }

    function encodeMedia(input, type) {
        const reader = new FileReader();
        reader.onloadend = () => { tempMedia[type] = reader.result; };
        reader.readAsDataURL(input.files[0]);
    }

    function saveData() {
        const data = {
            name: document.getElementById('e-name').value,
            year: document.getElementById('e-year').value,
            history: document.getElementById('e-history').value,
            img: tempMedia.img || "",
            audio: document.getElementById('e-audio-link').value
        };
        db.ref('bands').push(data).then(() => showScreen('screen-list'));
    }

    function viewBand(id) {
        currentBandId = id;
        db.ref('bands/' + id).once('value', (snap) => {
            const b = snap.val();
            document.getElementById('view-content').innerHTML = `
                <img src="${b.img}" class="detail-img">
                <h1>${b.name}</h1>
                <p><b>${b.year}</b></p>
                <audio controls src="${b.audio}"></audio>
                <div style="white-space:pre-wrap; line-height:1.6;">${b.history}</div>
            `;
            loadComments(id);
            showScreen('screen-view');
        });
    }

    // –õ–û–ì–ò–ö–ê –ö–û–ú–ú–ï–ù–¢–ê–†–ò–ï–í
    function addComment() {
        const name = document.getElementById('c-name').value || "–ê–Ω–æ–Ω–∏–º";
        const text = document.getElementById('c-text').value;
        if (!text) return;

        db.ref('comments/' + currentBandId).push({
            name: name,
            text: text,
            date: new Date().toLocaleDateString()
        });
        document.getElementById('c-text').value = "";
    }

    function loadComments(bandId) {
        db.ref('comments/' + bandId).on('value', (snap) => {
            const container = document.getElementById('comments-container');
            container.innerHTML = "";
            const data = snap.val();
            if(!data) { container.innerHTML = "–ü–æ–∫–∞ –Ω–µ—Ç –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–µ–≤. –ë—É–¥—å –ø–µ—Ä–≤—ã–º!"; return; }
            for (let id in data) {
                container.innerHTML += `
                    <div class="comment-item">
                        <b>${data[id].name}:</b> ${data[id].text} 
                        <span style="float:right; opacity:0.5; font-size:0.8em;">${data[id].date}</span>
                    </div>
                `;
            }
        });
    }
</script>
</body>
</html>
